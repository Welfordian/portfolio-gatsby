(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[876],{7228:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a},t.exports.__esModule=!0,t.exports.default=t.exports},379:function(t,e,n){var a=n(7228);t.exports=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},8203:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return S}});var a=n(4578),r=n(4217),s=n(120),i=n(3147),o=n.n(i),l=n(9157),u=(n(2496),n(2982)),c=n(1070),d=n.n(c),f=n(1465),p=n(9117),h=(n(4068),n(9201),function(t){function e(){return t.apply(this,arguments)||this}return(0,a.Z)(e,t),e.prototype.render=function(){var t=this;return r.default.createElement("div",{className:"md:h-screen overflow-auto col-span-4 md:col-span-2 lg:col-span-1 dark:text-gray-300"},r.default.createElement("div",{className:"flex-grow h-full overflow-auto flex flex-col gap-2"},this.props.playlist.map((function(e,n){return r.default.createElement("div",{className:"flex gap-2 border-b border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",onClick:function(){return t.props.onChange(n)}},r.default.createElement("div",null,r.default.createElement("div",{className:"relative",style:{width:"164px"}},t.props.currentVideoIndex===n?r.default.createElement("div",{className:"absolute inset-0 flex justify-center items-center text-white bg-black/60"},r.default.createElement(p.Levels,{size:40,speed:.5})):"",r.default.createElement("img",{className:"w-full",src:e.snippet.thumbnails.high.url}),r.default.createElement("p",{className:"absolute bottom-0 right-0 px-1 text-sm mr-1 mb-1 text-white bg-black/70",dangerouslySetInnerHTML:{__html:e.duration_raw}}))),r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("div",{className:"flex flex-col"},r.default.createElement("p",{dangerouslySetInnerHTML:{__html:e.title}})))))}))))},e}(r.default.Component)),m=h,y="undefined"!=typeof window,v=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={isPlaylist:n.props.isPlaylist},n}(0,a.Z)(e,t);var n=e.prototype;return n.savePlaylist=function(){var t=this;d().post("https://api.welford.me/v1/playlists",{videos:this.props.videos,tracks:this.props.tracks}).then((function(e){y&&window.history.pushState({},"","https://welford.me/youtify/"+e.data.slug),t.setState({isPlaylist:!0})}))},n.render=function(){return this.state.isPlaylist?null:r.default.createElement("div",null,r.default.createElement("button",{className:"text-black dark:text-gray-300",onClick:this.savePlaylist.bind(this)},"Save Playlist"))},e}(r.default.Component),g=n(4877),w=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={processedIndex:0,tracks:n.props.tracks,videos:n.props.videos,currentVideoIndex:0,youtubeKey:"AIzaSyBMDzO5UCJyXyo1FD1a4ShFeTY0M0UFnbA"},n}(0,a.Z)(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this;this.props.slug.length?this.determineSavedPlaylist():d().get("https://api.spotify.com/v1/playlists/"+this.props.playlist,{headers:{Authorization:"Bearer "+this.props.token}}).then((function(e){t.setState({tracks:e.data.tracks.items}),t.startProcessing()}))},n.determineSavedPlaylist=function(){var t=this;this.props.slug.length>0&&d().get("https://api.welford.me/v1/playlists/"+this.props.slug).then((function(e){t.setState({tracks:e.data.tracks,videos:e.data.videos})}))},n.startProcessing=function(){var t=this,e=this.state.tracks[this.state.processedIndex];void 0!==e&&"track"in e&&d().get("https://youtube-search.welford.me/?artist="+e.track.artists[0].name+"&track="+e.track.name+"&key=Ol$c4wtIy-FV2h6$OjxXUL6-$f6wycH").then((function(e){t.setState({videos:[].concat((0,u.Z)(t.state.videos),[e.data[0]])}),t.state.processedIndex<t.state.tracks.length&&(t.setState({processedIndex:t.state.processedIndex+1}),t.startProcessing())}))},n.hasNextVideo=function(){return this.state.currentVideoIndex+1<this.state.videos.length},n.hasPreviousVideo=function(){return this.state.currentVideoIndex>0},n.nextVideo=function(){this.state.currentVideoIndex+1<this.state.videos.length&&this.setState({currentVideoIndex:this.state.currentVideoIndex+1})},n.previousVideo=function(){this.state.currentVideoIndex>0&&this.setState({currentVideoIndex:this.state.currentVideoIndex-1})},n.switchVideo=function(t){this.setState({currentVideoIndex:t},(function(){(0,g.jU)()&&window.scrollTo({top:0,behavior:"smooth"})}))},n.render=function(){return r.default.createElement("div",{className:"h-full"},this.state.videos.length?r.default.createElement("div",{className:"grid grid-cols-4 justify-between gap-3 md:gap-2"},r.default.createElement("div",{className:"md:h-screen col-span-4 md:col-span-2 lg:col-span-3"},r.default.createElement("div",{className:"h-full w-full"},r.default.createElement(f.Z,{className:"aspect-w-16 aspect-h-9",videoId:this.state.videos[this.state.currentVideoIndex].id.videoId,opts:{height:"auto",width:"100%",playerVars:{autoplay:1}},onEnd:this.nextVideo.bind(this)}),r.default.createElement("div",{className:"flex justify-between mt-4"},r.default.createElement("button",{className:this.hasPreviousVideo()?"text-black dark:text-gray-300":"text-gray-300 dark:text-gray-500",onClick:this.previousVideo.bind(this)},"Previous"),r.default.createElement(v,{videos:this.state.videos,tracks:this.state.tracks,isPlaylist:this.props.slug.length}),r.default.createElement("button",{className:this.hasNextVideo()?"text-black dark:text-gray-300":"text-gray-300 dark:text-gray-500",onClick:this.nextVideo.bind(this)},"Next")))),r.default.createElement(m,{onChange:this.switchVideo.bind(this),currentVideoIndex:this.state.currentVideoIndex,playlist:this.state.videos})):null)},e}(r.default.Component),x=function(t){function e(){return t.apply(this,arguments)||this}(0,a.Z)(e,t);var n=e.prototype;return n.handlePlaylistUpdate=function(t){var e=t.target;try{var n=new RegExp(/\/playlist.*\?/);this.props.onPlaylist(n.exec(e.value)[0].replace("/playlist/","").replace("?",""))}catch(a){}},n.render=function(){return r.default.createElement("div",null,r.default.createElement("p",{className:"text-4xl dark:text-gray-300"},"Spotify Playlist URL"),r.default.createElement("input",{className:"border-4 border-black w-full px-2 py-3 mt-8",type:"text",onChange:this.handlePlaylistUpdate.bind(this)}))},e}(r.default.Component),b=x,k="undefined"!=typeof window,E=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={playlist:k&&window.location.pathname.replace("/youtify/","").length>0?window.location.pathname.replace("/youtify/",""):null,slug:k?window.location.pathname.replace("/youtify/",""):null,tracks:[],videos:[]},n}return(0,a.Z)(e,t),e.prototype.render=function(){var t=this;return r.default.createElement("div",{className:""},this.state.playlist?r.default.createElement(w,{playlist:this.state.playlist,tracks:this.state.tracks,videos:this.state.videos,token:this.props.token,slug:this.state.slug}):r.default.createElement(b,{onPlaylist:function(e){t.setState({playlist:e})},playlist:this.state.playlist}))},e}(r.default.Component),N=E,P=(n(4280),n(5186)),I="undefined"!=typeof window,S=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={token:o().get("spotifyAuthToken"),playlist:I&&window.location.pathname.replace("/youtify/","").length>0?window.location.pathname.replace("/youtify/",""):null},n}(0,a.Z)(e,t);var n=e.prototype;return n.gotToken=function(t){this.setState({token:t}),I&&(window.location.hash="")},n.render=function(){var t=this;return r.default.createElement(r.default.Fragment,null,this.state.token||this.state.playlist?r.default.createElement(s.GN.Provider,{value:this.state.token},r.default.createElement(N,{token:this.state.token})):r.default.createElement("div",{className:"flex flex-col items-center justify-center mt-12"},r.default.createElement(l.yb,{redirectUri:"https://welford.me/youtify/",clientID:"6d08c3a931c74f95813b4f181ef0ad50",scopes:[l.Y.userReadPrivate,"user-read-email"],title:"Connect to Spotify",logoClassName:"w-8 mr-8 fill-current text-white",btnClassName:"flex bg-black text-white items-center px-8 py-3 w-full md:w-2/4 lg:w-1/4 text-center justify-center dark:bg-gradient-to-tr dark:from-gray-800 dark:via-gray-700 dark:to-gray-900",onAccessToken:function(e){t.gotToken(e)}}),r.default.createElement("div",{className:"mt-4 w-full md:w-2/4 lg:w-1/4 right-0 md:ml-0 p-4 md:mb-4 bg-opacity-90 bg-gray-700 shadow shadow-current shadow-md",role:"alert"},r.default.createElement("div",{className:"flex items-center"},r.default.createElement("svg",{"aria-hidden":"true",className:"w-5 h-5 mr-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})),r.default.createElement("span",{className:"sr-only"},"Info"),r.default.createElement("h3",{className:"text-lg font-medium text-white"},"YouTube Quota")),r.default.createElement("div",{className:"mt-2 text-sm text-white"},"The YouTube API is awful. Use a small playlist to avoid hitting the quota."))),r.default.createElement(P.q,{htmlAttributes:{class:"youtify"}}))},e}(r.default.Component)},4068:function(){},7326:function(t,e,n){"use strict";function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{Z:function(){return a}})},5671:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return a}})},3144:function(t,e,n){"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.d(e,{Z:function(){return r}})},1120:function(t,e,n){"use strict";function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}n.d(e,{Z:function(){return a}})},136:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var a=n(9611);function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,a.Z)(t,e)}},2963:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var a=n(1002),r=n(7326);function s(t,e){if(e&&("object"===(0,a.Z)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,r.Z)(t)}},1002:function(t,e,n){"use strict";function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}n.d(e,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-youtify-js-87589d739c926d9827c2.js.map